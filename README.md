# Chat API

Этот проект представляет собой API для управления чатами и сообщениями. Он позволяет создавать чаты, отправлять в них сообщения, получать историю сообщений и удалять чаты.

## Функциональность

- **Создание чата**: `POST /v1/chats/`
  - Тело запроса: `{"title": "Название чата"}`
  - Ответ: `201 Created`, объект чата `{id, title, created_at}`

- **Получение чата и сообщений**: `GET /v1/chats/{chat_id}`
  - Параметр запроса: `limit` (по умолчанию 20, максимум 100)
  - Ответ: `200 OK`, объект `{chat: {...}, messages: [...]}`

- **Отправка сообщения**: `POST /v1/chats/{chat_id}/messages/`
  - Тело запроса: `{"text": "Текст сообщения"}`
  - Ответ: `201 Created`, объект сообщения `{id, chat_id, text, created_at}`

- **Удаление чата**: `DELETE /v1/chats/{chat_id}`
  - Ответ: `204 No Content`

## Технологии

- **Python 3.11**
- **FastAPI** - фреймворк для веб-API
- **SQLAlchemy** (AsyncIO) - ORM для работы с базой данных
- **PostgreSQL** - основная реляционная база данных
- **Alembic** - инструмент для миграций базы данных
- **Pytest** - фреймворк для написания и запуска тестов
- **Docker & Docker Compose** - для контейнеризации и запуска приложения и зависимостей

## Архитектура

Проект следует принципам Clean Architecture с разделением на уровни:
- **API (app/api)**: маршруты и обработка HTTP-запросов
- **Сервисы (app/services)**: бизнес-логика
- **Репозитории (app/repositories)**: взаимодействие с базой данных
- **Схемы (app/schemas)**: модели данных для валидации Pydantic
- **Модели (app/models)**: ORM-модели SQLAlchemy

## Запуск с помощью Docker Compose

1.  Убедитесь, что у вас установлены [Docker](https://www.docker.com/get-started) и [Docker Compose](https://docs.docker.com/compose/install/).
2.  Склонируйте или распакуйте этот проект.
3.  Откройте терминал и перейдите в директорию проекта (где находится `docker-compose.yml`).
4.  Выполните команду:

    ```bash
    docker-compose up --build
    ```

    Эта команда:
    - Соберёт образы для приложения, базы данных и pgAdmin.
    - Запустит все контейнеры.
    - Применит миграции базы данных.

5.  После запуска API будет доступен по адресу `http://localhost:8000`.
6.  Swagger UI будет доступен по адресу `http://localhost:8000/docs`.
7.  PgAdmin будет доступен по адресу `http://localhost:5050` (учетные данные по умолчанию: `admin@admin.com` / `Ser19052001`).